using UnityEngine;

/// <summary>
/// –£–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø–∏—Å—å—é –≤–∏–¥–µ–æ —Å —ç–∫—Ä–∞–Ω–∞.
/// –¢—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∞—Å—Å–µ—Ç–∞, —Ç–∞–∫–æ–≥–æ –∫–∞–∫ VideoKit (NatCorder).
/// </summary>
public class VideoRecordingManager : MonoBehaviour
{
      private bool isRecording = false;

      /// <summary>
      /// –ù–∞—á–∏–Ω–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤–∏–¥–µ–æ.
      /// </summary>
      public void StartRecording()
      {
            if (isRecording)
            {
                  Debug.LogWarning("‚ö†Ô∏è –ó–∞–ø–∏—Å—å —É–∂–µ –∏–¥–µ—Ç.");
                  return;
            }

            isRecording = true;
            Debug.Log("üî¥ –ù–∞—á–∞–ª–æ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ...");

            // ===================================================================
            // –ó–ê–ì–õ–£–®–ö–ê –î–õ–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–ò
            // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ–¥ –¥–ª—è –Ω–∞—á–∞–ª–∞ –∑–∞–ø–∏—Å–∏ –∏–∑ –≤–∞—à–µ–≥–æ –∞—Å—Å–µ—Ç–∞.
            // –ü—Ä–∏–º–µ—Ä –¥–ª—è VideoKit (NatCorder):
            //
            // var clock = new RealtimeClock();
            // var recorder = new MP4Recorder(Screen.width, Screen.height, 30);
            // var cameraInput = new CameraInput(recorder, clock, Camera.main);
            //
            // Debug.Log("–ó–∞–ø–∏—Å—å –±—É–¥–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –≥–∞–ª–µ—Ä–µ—é.");
            // ===================================================================
      }

      /// <summary>
      /// –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤–∏–¥–µ–æ.
      /// </summary>
      public void StopRecording()
      {
            if (!isRecording)
            {
                  Debug.LogWarning("‚ö†Ô∏è –ó–∞–ø–∏—Å—å –Ω–µ –±—ã–ª–∞ –Ω–∞—á–∞—Ç–∞.");
                  return;
            }

            isRecording = false;
            Debug.Log("üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–ø–∏—Å–∏ –≤–∏–¥–µ–æ...");

            // ===================================================================
            // –ó–ê–ì–õ–£–®–ö–ê –î–õ–Ø –ò–ù–¢–ï–ì–†–ê–¶–ò–ò
            // –ó–¥–µ—Å—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ–¥ –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏ –∏–∑ –≤–∞—à–µ–≥–æ –∞—Å—Å–µ—Ç–∞.
            // –ü—Ä–∏–º–µ—Ä –¥–ª—è VideoKit (NatCorder):
            //
            // await cameraInput.Dispose();
            // await recorder.Dispose();
            //
            // Debug.Log("–í–∏–¥–µ–æ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ.");
            // ===================================================================
      }
}