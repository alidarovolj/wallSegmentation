# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ AR

## üîß –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ—Ç–æ—á–Ω–∞—è —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è (–ª—é–¥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ —Å—Ç–µ–Ω—ã)

**–ü—Ä–∏—á–∏–Ω—ã:**
1. –ù–∏–∑–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (512x512)
2. –ò–∑–±—ã—Ç–æ—á–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (5+ –∏—Ç–µ—Ä–∞—Ü–∏–π)
3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
4. –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ–≥–æ —É—Å–∏–ª–µ–Ω–∏—è

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:**

#### 1. –£–≤–µ–ª–∏—á–µ–Ω–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
```csharp
// –ë–´–õ–û: 512x512 (—Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–æ)
int outputWidth = 512;
int outputHeight = 512;

// –°–¢–ê–õ–û: 1024x1024 (–ª—É—á—à–µ –¥–ª—è —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤)
int outputWidth = 1024;
int outputHeight = 1024;
```

#### 2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ
```csharp
// –ë–´–õ–û: 5 –∏—Ç–µ—Ä–∞—Ü–∏–π (—Ä–∞–∑–º—ã–≤–∞–µ—Ç –¥–µ—Ç–∞–ª–∏)
private int maskSmoothingIterations = 5;

// –°–¢–ê–õ–û: 2 –∏—Ç–µ—Ä–∞—Ü–∏–∏ (—Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–µ—Ç–∞–ª–∏)
private int maskSmoothingIterations = 2;
```

#### 3. –î–æ–±–∞–≤–ª–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ù–æ–≤—ã–π —à–µ–π–¥–µ—Ä: `AdvancedMaskPostProcessing.compute`
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫—Ä–∞—ë–≤
- –£—Å–∏–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ –¥–ª—è —á—ë—Ç–∫–∏—Ö –≥—Ä–∞–Ω–∏—Ü

#### 4. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ —Ü–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞
```csharp
// –£–õ–£–ß–®–ï–ù–û: –Ø—Ä–∫–∏–π –∫—Ä–∞—Å–Ω—ã–π –¥–ª—è –ª—é–¥–µ–π (–∫–ª–∞—Å—Å 12)
if (classId == 12) return float3(255/255.0, 0/255.0, 0/255.0);

// –î–û–ë–ê–í–õ–ï–ù–û: –ü–æ–∫–∞–∑ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤ –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
float3 otherColor = getClassColor(class_index) * 0.3;
return fixed4(otherColor, _Opacity * 0.2);
```

## üéØ –ù–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã –∫–∞—á–µ—Å—Ç–≤–∞ (—á–µ—Ä–µ–∑ —Ñ–ª–∞–∂–∫–∏ –≤ Inspector)

### –í AsyncSegmentationManager –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Å–µ–∫—Ü–∏—è "–†–µ–∂–∏–º—ã –∫–∞—á–µ—Å—Ç–≤–∞":

#### ‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å** (`maxAccuracyMode`)
- –û—Ç–∫–ª—é—á–∞–µ—Ç —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–∏
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ 1280x1280
- –û—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫—É
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º

#### ‚öñÔ∏è **–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º** (`balancedMode`) - **–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (2 –∏—Ç–µ—Ä–∞—Ü–∏–∏)
- –£–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∫–ª—é—á–µ–Ω–∞
- –ê–¥–∞–ø—Ç–∏–≤–Ω–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ/–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

#### ‚ö° **–†–µ–∂–∏–º –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** (`performanceMode`)
- –†–∞–∑—Ä–µ—à–µ–Ω–∏–µ 640x640 –¥–ª—è –±—ã—Å—Ç—Ä–æ—Ç—ã
- –ë–∞–∑–æ–≤–æ–µ —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (1 –∏—Ç–µ—Ä–∞—Ü–∏—è)
- –û—Ç–∫–ª—é—á–µ–Ω–∞ —É–ª—É—á—à–µ–Ω–Ω–∞—è –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
1. –í Inspector –≤—ã–±–µ—Ä–∏—Ç–µ **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω** —Ñ–ª–∞–∂–æ–∫
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å —Ä–µ–∂–∏–º—ã –≤ runtime

## üîç –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –æ—Ç–ª–∞–¥–∫–∏

### SegmentationDebugger
–ù–æ–≤—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç FPS –∏ —Ä–∞–∑–º–µ—Ä—ã –º–∞—Å–∫–∏
- –ö–Ω–æ–ø–∫–∏ –±—ã—Å—Ç—Ä–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
- –û—Ç–ª–∞–¥–∫–∞ –ø–æ –∫–ª–∏–∫—É –º—ã—à—å—é
- –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—ã—Ä—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –º–∞—Å–∫–∏

### –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é AsyncSegmentationManager
–ù–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã:
- "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏"
- "–°–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–∂–∏–º"
- "–¢–µ—Å—Ç: –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ"

## üé® –£–ª—É—á—à–µ–Ω–∏—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏

### –ù–æ–≤—ã–µ —à–µ–π–¥–µ—Ä—ã
1. **AdvancedMaskPostProcessing.compute**
   - EdgeAwareSmoothing: —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –∫—Ä–∞—ë–≤
   - ContrastEnhancement: —É—Å–∏–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ –≥—Ä–∞–Ω–∏—Ü

2. **–û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–π VisualizeMask.shader**
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ü–≤–µ—Ç–∞ –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
   - –î–æ–±–∞–≤–ª–µ–Ω –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–π –ø–æ–∫–∞–∑ –¥—Ä—É–≥–∏—Ö –∫–ª–∞—Å—Å–æ–≤

## üìä –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã

–ü–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
- ‚úÖ –õ—é–¥–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è **—è—Ä–∫–æ-–∫—Ä–∞—Å–Ω—ã–º** —Ü–≤–µ—Ç–æ–º
- ‚úÖ –°—Ç–µ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è **—Å–µ—Ä—ã–º** —Ü–≤–µ—Ç–æ–º  
- ‚úÖ –ß—ë—Ç–∫–∏–µ –≥—Ä–∞–Ω–∏—Ü—ã –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏
- ‚úÖ –õ—É—á—à–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –º–µ–ª–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- ‚úÖ –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç–∏:
1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ñ–ª–∞–∂–æ–∫ "Max Accuracy Mode"** –≤ Inspector
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
3. –û—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–±–ª–µ–º —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏–∏

### –î–ª—è –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ–±–ª–µ–º:
1. –í–∫–ª—é—á–∏—Ç–µ **"Max Accuracy Mode"** –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞
2. –î–æ–±–∞–≤—å—Ç–µ `SegmentationDebugger` –Ω–∞ —Å—Ü–µ–Ω—É
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫—É "–ü–æ–∫–∞–∑–∞—Ç—å —Å—ã—Ä—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è"
4. –ö–ª–∏–∫–∞–π—Ç–µ –ø–æ –ø—Ä–æ–±–ª–µ–º–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞

### –î–ª—è –ø–æ–≤—Å–µ–¥–Ω–µ–≤–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **"Balanced Mode"** (–≤–∫–ª—é—á–µ–Ω –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
2. –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
3. –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–ª—É—á–∞–µ–≤

### –î–ª—è —Å–ª–∞–±—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤:
1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç–µ—Å—å –Ω–∞ **"Performance Mode"**
2. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–Ω–∏–∑–∏—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –¥–æ 640x640
3. –£–ª—É—á—à–∏—Ç—Å—è —á–∞—Å—Ç–æ—Ç–∞ –∫–∞–¥—Ä–æ–≤ –ø—Ä–∏ –±–∞–∑–æ–≤–æ–º –∫–∞—á–µ—Å—Ç–≤–µ

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ AsyncSegmentationManager:
- `useAdvancedPostProcessing` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é –ø–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫—É
- `edgeThreshold` - –ø–æ—Ä–æ–≥ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫—Ä–∞—ë–≤ (0.01-0.5)
- `contrastFactor` - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞—Å—Ç–∞ (1-10)
- `advancedPostProcessingShader` - —Å—Å—ã–ª–∫–∞ –Ω–∞ –Ω–æ–≤—ã–π —à–µ–π–¥–µ—Ä

### –§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω–∏–π:
- `Assets/Scripts/AsyncSegmentationManager.cs` - –æ—Å–Ω–æ–≤–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- `Assets/Shaders/AdvancedMaskPostProcessing.compute` - –Ω–æ–≤—ã–π —à–µ–π–¥–µ—Ä
- `Assets/Shaders/VisualizeMask.shader` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ü–≤–µ—Ç–æ–≤
- `Assets/Scripts/SegmentationDebugger.cs` - –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –æ—Ç–ª–∞–¥–∫–∏
